<% content_for :javascript_includes do %>
    <%= javascript_include_tag 'lobbytrack_reports.js' %>
<% end %>
<div class="home-page-section">
  <h1>Visitor check-in report</h1>
  <div>
    <div class="btn-group">
      <%= link_to button_tag('LobbyTrack reports', class: 'btn btn-md btn-default btn-full'), lobbytrack_reports_path %>
    </div>
    <div class="btn-group">
      <%= main_menu_button %>
    </div>
  </div>
  <%= render 'visitor' %>
  <h3><%= @lobbytrack_reports.size %> Check-ins</h3>
  <div>
    <table class='table table-striped'>
      <thead>
      <tr>
        <th>
          Check-in count
        </th>
        <th>
          Check-in date
        </th>
        <th>
          Check-in location
        </th>
      </tr>
      </thead>
      <tbody>
      <% @lobbytrack_reports.each_with_index do |row, index| %>
          <tr>
            <td> <%= index + 1 %> </td>
            <td>
              <%= row['DateOfEvent'] ? row['DateOfEvent'].strftime('%F %R') : '' %>
            </td>
            <td>
              <%= LobbytrackReport.location.fetch(row['LocationID']) %>
            </td>
          </tr>
      <% end %>
      </tbody>
    </table>
  </div>
</div>
<p />
<div>
  <div class="btn-group">
    <%= link_to button_tag('LobbyTrack reports', class: 'btn btn-md btn-default btn-full'), lobbytrack_reports_path %>
  </div>
  <div class="btn-group">
    <%= main_menu_button %>
  </div>
</div>
