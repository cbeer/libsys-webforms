<% content_for :javascript_includes do %>
  <%= javascript_include_tag "packages.js" %>
<% end %>
<h1>Electronic resource package management</h1>

<div class ='nav-buttons'>
  <ul class='nav nav-pills'>
    <li><%= link_to 'Add package', new_package_path, class: 'btn btn-md btn-default btn-full' %></li>
    <li><%= link_to 'Run tests', run_tests_packages_path, class: 'btn btn-md btn-default btn-full' %></li>
    <li><%= link_to 'Exclude URL List', url_exclusions_path, class: 'btn btn-md btn-default btn-full' %></li>
  </ul>
</div>

<table class='table table-striped'>
  <thead>
    <tr>
      <th>&nbsp;</th>
      <th>Status</th>
      <th>Package ID</th>
      <th>Package Name</th>
      <th>Vendor</th>
      <th>Date Entered</th>
      <th>&nbsp;</th>
    </tr>
  </thead>
  <tbody>
    <% @packages.each do |package| %>
      <tr>
        <td>
          <% if package.package_status.downcase == 'active' %>
            <%= link_to 'Deactivate', deactivate_package_path(package), method: :put, action: :deactivate, class: 'btn btn-md btn-warning btn-full' %>
          <% else %>
            <%= link_to 'Activate', activate_package_path(package), method: :put, action: :activate, class: 'btn btn-md btn-success btn-full' %>
          <% end %>
        </td>
        <td><%= package.package_status %></td>
        <td><%= package.package_id %></td>
        <td><%= package.package_name %></td>
        <td><%= package.vendor_name %></td>
        <td><%= package.date_entered.strftime('%d-%b-%Y') %></td>
        <td class='no-wrap'>
          <%= link_to 'Details', package_path(package), class: 'btn btn-md btn-default' %>
          <%= link_to 'Edit', edit_package_path(package), class: 'btn btn-md btn-default' %>
          <%= link_to 'Show pkg files', package_files_completed_url(:package_id => package.package_id), class: 'btn btn-md btn-default' %>
        </td>
      </tr>
    <% end %>
  </tbody>
</table>

<div class="btn-group">
  <%= main_menu_button %>
</div>
