<h3>Details for <em><%= @package.package_name %></em></h3>

<%= link_to 'Edit package', edit_package_path(@package), class: 'btn btn-md btn-default' %>

<%= link_to 'Delete package', @package, method: :delete, data: { confirm: 'Are you sure?' }, class: 'btn btn-md btn-warning' %>

<h3>Package information</h3>
<table class='table table-striped'>
  <tbody>
    <% package_info.each do |x| %>
    <tr class='<%= cycle("odd", "even") %>'>
      <td class='col-sm-4'><strong><%= package_label(x) %></strong></td>
      <td class='col-sm-8'><%= @package[x] %></td>
    </tr>
    <% end %>
  </tbody>
</table>

<h3>Pickup information</h3>
<span class='small'>Location for files ready to load: /s/SUL/Dataload/Eload/Import</span>
<table class='table table-striped'>
  <tbody>
    <% pickup_info.each do |x| %>
    <tr class='<%= cycle("odd", "even") %>'>
      <td class='col-sm-4'><strong><%= package_label(x) %></strong></td>
      <td class='col-sm-8'>
        <% if x == 'afs_path' && ! @package[x].blank? %>
          <span class='small'>/afs/ir/dept/SUL/dsg/libsys/Eload/</span>
        <% end %>
        <% if x == 'put_file_loc' && ! @package[x].blank? %>
          <span class='small'>/s/SUL/Dataload/EloadNotGeneric/</span>
        <% end %>
        <% if x == 'no_ftp_search' && @package.ftp_file_prefix == 'NO FTP SEARCH ***' %>
          <p>NO</p>
        <% elsif x == 'no_ftp_search' %>
          <p>YES</p>
        <% end %>
        <% if x == 'ftp_file_prefix' && @package.ftp_file_prefix == 'NO FTP SEARCH ***' %>
          <% next %>
        <% end %>
        <%= @package[x] %>
      </td>
    </tr>
    <% end %>
  </tbody>
</table>

<h3>Processing rules</h3>
<table class='table table-striped'>
  <tbody>
    <tr class='odd'>
      <td class='col-sm-4'><strong><%= package_label('proc_type') %></strong></td>
      <td class='col-sm-8'><%= processing_type(@package.proc_type) %><td>
    </tr>
    <tr class='even'>
      <td class='col-sm-4'><strong><%= package_label('match_opts') %></strong></td>
      <td class='col-sm-8'>
        <% unless @package.match_opts.nil? %>
          <% @package.match_opts.split(',').each do |x| %>
            <p><%= match_options(x) %></p>
          <% end %>
        <% end %>
      </td>
    </tr>
  </tbody>
</table>

<h3>Processing information</h3>
<table class='table table-striped'>
  <tbody>
    <% processing_info.each do |x| %>
    <tr class='<%= cycle("odd", "even") %>'>
      <td class='col-sm-4'><strong><%= package_label(x) %></strong></td>
      <td class='col-sm-8'>
        <% if x == 'encoding_level' %>
          <%= marc_encoding_lvl[@package[x]] %>
        <% elsif x == 'access_urls_plats' && @package[x].present? %>
          <table class='table'>
            <thead>
              <tr>
                <th>URL Substring</th>
                <th>Link text</th>
                <th>Provider name</th>
                <th>Collection name</th>
                <th>Access type</th>
              </tr>
            </thead>
            <tbody>
              <% @package[x].split('|').each do |row| %>
                <tr>
                  <% row.split(/\t/).each do |data| %>
                    <td><%= data %></td>
                  <% end %>
                </tr>
              <% end %>
            </tbody>
          </table>
        <% else %>
          <%= @package[x] %>
        <% end %>
      </td>
    </tr>
    <% end %>
  </tbody>
</table>

<h3>Other</h3>
<table class='table table-striped'>
  <tbody>
    <% package_other.each do |x| %>
    <tr class='<%= cycle("odd", "even") %>'>
      <td class='col-sm-4'><strong><%= package_label(x) %></strong></td>
      <td class='col-sm-8'><%= @package[x] %></td>
    </tr>
    <% end %>
  </tbody>
</table>


<%= link_to 'Back to package list', packages_path, class: 'btn btn-md btn-default  btn-full' %>
